(()=>{"use strict";var t={p:""};t.p=document.getElementById("webpack-public-path").innerText+"Js/",(()=>{function t(t,e,o=void 0,n=void 0){const r=new FormData;r.append("fKey",null!=n?n:StackExchange.options.user.fkey),r.append("data",JSON.stringify(e)),r.append("event",t);let s={};o&&(s["X-Previous-Event-Id"]=o),fetch((StackExchange.options.site.routePrefix||"")+"/stackevent",{method:"POST",keepalive:!0,body:r,headers:s}).then((()=>{}))}StackExchange=window.StackExchange=window.StackExchange||{},StackOverflow=window.StackOverflow=window.StackOverflow||{};var e,o;const n=600,r=(null===(e=document.getElementById("js-follow-ups-experiment-group"))||void 0===e?void 0:e.getAttribute("data-value"))||"test",s=(null===(o=document.getElementById("js-follow-ups-experiment-group"))||void 0===o?void 0:o.getAttribute("data-site-url"))||"",a=new class{constructor(t){this.isMentionEnabled=t}triggerMentionInitEvent(t){this.isMentionEnabled&&document.dispatchEvent(new CustomEvent("follow-ups-mention:init",{detail:{elements:t}}))}isMentionPopupShow(){return this.isMentionEnabled&&null!=document.querySelector(".mention-popup")}triggerMentionEditEvent(t,e,o){this.isMentionEnabled&&document.dispatchEvent(new CustomEvent("follow-ups-mention:edit",{detail:{container:t,postId:e,followUpId:o}}))}getMentionList(t){var e,o;if(!this.isMentionEnabled)return"";const n=[],r=this.parseMentions(t.value),s=Array.from(null!==(o=null===(e=t.parentElement)||void 0===e?void 0:e.querySelectorAll(".js-inputted-mention"))&&void 0!==o?o:[]);return r.forEach(((t,e)=>{var o;const r=s.find((e=>{var o;return t===(null===(o=e.textContent)||void 0===o?void 0:o.trim())}));if(r){const t={AppearanceOrdinal:e+1,TargetUserId:null!=r.getAttribute("data-userid")?parseInt(r.getAttribute("data-userid")):void 0,TargetAtName:null!==(o=r.textContent)&&void 0!==o?o:void 0};n.push(t)}})),JSON.stringify(n)}parseMentions(t){const e=/@([a-zA-Z0-9_]+)/g,o=[];let n;for(;null!==(n=e.exec(t));)o.push(`@${n[1]}`);return o}clearMentionList(t){var e;this.isMentionEnabled&&(null===(e=t.parentElement)||void 0===e||e.querySelectorAll(".js-inputted-mention").forEach((t=>{t.remove()})))}}(null!=document.querySelector("#js-follow-ups-mention")),l=(t,e)=>{t.querySelectorAll(e.join(", ")).forEach((t=>{t.classList.toggle("d-none")}))},i=t=>{var e;if(t&&!t.classList.contains("d-none"))null===(e=t.querySelector("textarea"))||void 0===e||e.focus();else{const e=t.querySelector("textarea");e&&(e.value=""),a.clearMentionList(e)}};async function c(e,o,n,l,i){var c;e.preventDefault();const d=o.getAttribute("data-post-id");null==n||n.classList.add("is-loading");let u,p=!1;const f=parseInt((null===(c=document.querySelector(".js-question"))||void 0===c?void 0:c.getAttribute("data-questionid"))||"0"),w=parseInt(d||"0"),h=parseInt(o.getAttribute("data-total-comment-count")||"0"),y=[...document.querySelectorAll(".js-follow-ups-container")].indexOf(o);try{const t=new FormData;t.append("comment",l.value),t.append("fkey",StackExchange.options.user.fkey),t.append("mentionsJson",a.getMentionList(l));const e=await fetch(`${s}/posts/${d}/comments`,{method:"POST",body:t});if(!e.ok){const t=await e.text()||__tr(["An error occurred while attempting to submit your comment"], undefined, "en", []);throw new Error(t)}{p=!0;const t=await e.text(),n=new DOMParser,r=n.parseFromString(t,"text/html").querySelectorAll(".js-comment");u=parseInt(r[r.length-1].getAttribute("data-comment-id")||"0"),await m(o,{topCommentsOnly:!1,scrollToContainerEnd:i})}}catch(t){null==n||n.classList.remove("is-loading");let e=__tr(["An error occurred during edit submit."], undefined, "en", []);t instanceof Error&&t.message&&(e=t.message),StackExchange.helpers.showToast(e,{type:"danger"})}t("follow_ups_ui_experiment.comment.submit",{source:window.location.href,submitSuccess:p,questionId:f,answerId:w,commentId:u,numberOfPreExistingComments:h,answerPositionOnPage:y,followUpsUIExperimentGroup:r})}async function d(t,e,o,n){var r,l;t.preventDefault();const i=e.querySelector(`.js-follow-up[data-follow-up-id="${o}"]`),c=null===(l=null===(r=i.querySelector(".edit-comment-form .js-comment-body"))||void 0===r?void 0:r.textContent)||void 0===l?void 0:l.trim();if(c){if(n.value.trim()===c)return void StackExchange.helpers.showToast(__tr(["No changes were made to the comment!"], undefined, "en", []),{type:"danger"})}const d=i.querySelector(".js-edit-comment-submit");null==d||d.classList.add("is-loading");const u=i.getAttribute("data-reply-to-user-name"),p=new FormData;p.append("fkey",StackExchange.options.user.fkey),p.append("comment",b(n,u)),p.append("mentionsJson",a.getMentionList(n));try{const t=await fetch(`${s}/posts/comments/${o}/edit`,{method:"POST",body:p});if(!t.ok){const e=await t.text()||__tr(["An error occurred during edit submit."], undefined, "en", []);throw new Error(e)}await m(e)}catch(t){null==d||d.classList.remove("is-loading");let e=__tr(["An error occurred during edit submit."], undefined, "en", []);t instanceof Error&&t.message&&(e=t.message),StackExchange.helpers.showToast(e,{type:"danger",useRawHtml:!0})}}async function u(e,o,n,l,i){var c;e.preventDefault();const d=o.getAttribute("data-post-id"),u=n.querySelector(".js-reply-to-comment-submit");null==u||u.classList.add("is-loading");let p,f=!1;const w=parseInt((null===(c=document.querySelector(".js-question"))||void 0===c?void 0:c.getAttribute("data-questionid"))||"0"),h=parseInt(d||"0"),y=parseInt(o.getAttribute("data-total-comment-count")||"0"),g=[...document.querySelectorAll(".js-follow-ups-container")].indexOf(o),v=l.closest(".js-follow-up"),E=null==v?void 0:v.getAttribute("data-user-name");try{const t=new FormData;t.append("comment",b(l,E)),t.append("parentCommentId",i),t.append("fkey",StackExchange.options.user.fkey),t.append("mentionsJson",a.getMentionList(l));const e=await fetch(`${s}/posts/${d}/comments`,{method:"POST",body:t});if(!e.ok){const t=await e.text()||__tr(["An error occurred while attempting to submit your comment"], undefined, "en", []);throw new Error(t)}{f=!0;const t=await e.text(),n=new DOMParser,r=n.parseFromString(t,"text/html").querySelectorAll(".js-comment");p=parseInt(r[r.length-1].getAttribute("data-comment-id")||"0"),await m(o,{topCommentsOnly:!1})}}catch(t){null==u||u.classList.remove("is-loading");let e=__tr(["An error occurred during edit submit."], undefined, "en", []);t instanceof Error&&t.message&&(e=t.message),StackExchange.helpers.showToast(e,{type:"danger"})}t("follow_ups_ui_experiment.comment.submit",{source:window.location.href,submitSuccess:f,questionId:w,answerId:h,commentId:p,numberOfPreExistingComments:y,answerPositionOnPage:g,followUpsUIExperimentGroup:r})}async function m(t,e={}){var o,n;if(t){const r=null!==(o=null==e?void 0:e.topCommentsOnly)&&void 0!==o?o:"True"===t.getAttribute("data-top-comments-only"),l=null!==(n=null==e?void 0:e.includeDeleted)&&void 0!==n?n:"True"===t.getAttribute("data-include-deleted"),i=t.getAttribute("data-post-id"),c=await fetch(`${s}/posts/${i}/follow-ups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topCommentsOnly:r,includeDeleted:l})}),d=await c.text(),u=t.parentElement;if(u){u.innerHTML=d;const t=u.firstElementChild;t&&E([t]);const o=u.querySelectorAll(".js-follow-up");if(e.scrollToContainerEnd&&o.length>5){const t=o[o.length-2];setTimeout((()=>{t.scrollIntoView({behavior:"smooth",block:"start"})}),0)}}a.triggerMentionInitEvent(Array.from(document.querySelectorAll("textarea.js-comment-text-input")))}}const p=(t,e,o,r)=>{const s=t.querySelector(e),a=t.querySelector(o),l=t.querySelector(r);s&&a&&l&&(null==s||s.addEventListener("input",(t=>((t,e,o)=>{const r=t.target.value.trim().split(/\s+/).filter((t=>!t.startsWith("@"))).join(" ").length;let s="";e.classList.remove("fc-red-400","supernova"),r<15?(s=0===r?"Enter at least 15 characters":15-r+" more to go...",o.disabled=!0):r>n?(s=`Too long by ${r-n} characters`,e.classList.add("fc-red-400"),o.disabled=!0):(o.disabled=!1,n-r<=50&&(s=n-r+" characters left",e.classList.add("supernova"))),""!==s?(e.textContent=s,e.style.display="inline"):e.style.display="none"})(t,a,l))))},f=t=>{t.querySelectorAll(".js-follow-up-delete").forEach((e=>e.addEventListener("click",(o=>(async(t,e,o)=>{t.preventDefault();const n=o.closest(".js-follow-up"),r=null==n?void 0:n.getAttribute("data-follow-up-id"),a=new FormData;a.append("fkey",StackExchange.options.user.fkey),o.classList.add("is-loading");try{const t=await fetch(`${s}/posts/comments/${r}/vote/10`,{method:"POST",body:a});if(!t.ok){const e=await t.text()||__tr(["An error occurred while attempting to delete your comment"], undefined, "en", []);throw new Error(e)}await m(e)}catch(t){o.classList.remove("is-loading"),StackExchange.helpers.showToast(__tr(["An error occurred while attempting to delete your comment"], undefined, "en", []),{type:"danger"})}})(o,t,e)))))},w=t=>{t.querySelectorAll(".js-follow-up-undelete").forEach((e=>e.addEventListener("click",(o=>(async(t,e,o)=>{t.preventDefault();const n=e.getAttribute("data-post-id"),r=o.closest(".js-follow-up"),a=null==r?void 0:r.getAttribute("data-follow-up-id"),l=new FormData;l.append("fkey",StackExchange.options.user.fkey),o.classList.add("is-loading");try{(new FormData).append("fkey",StackExchange.options.user.fkey);const t=await fetch(`${s}/admin/posts/${n}/comments/${a}/undelete`,{method:"POST",body:l});if(!t.ok){const e=await t.text()||__tr(["An error occurred while attempting to undelete your comment"], undefined, "en", []);throw new Error(e)}await m(e)}catch(t){o.classList.remove("is-loading"),StackExchange.helpers.showToast(__tr(["An error occurred while attempting to undelete your comment"], undefined, "en", []),{type:"danger"})}})(o,t,e)))))},h=e=>{e.querySelectorAll(".js-vote-button").forEach((o=>{o.classList.contains("is-disabled")?o.addEventListener("click",(n=>{var s,a;n.preventDefault();const l=parseInt((null===(s=document.querySelector(".js-question"))||void 0===s?void 0:s.getAttribute("data-questionid"))||"0"),i=parseInt(e.getAttribute("data-post-id")||"0"),c=parseInt((null===(a=o.closest(".js-follow-up"))||void 0===a?void 0:a.getAttribute("data-follow-up-id"))||"0");t("follow_ups_ui_experiment.vote_attempt",{source:window.location.href,questionId:l,answerId:i,commentId:c,followUpsUIExperimentGroup:r})})):o.addEventListener("click",(t=>(async(t,e,o)=>{t.preventDefault();const n=e.getAttribute("data-post-id"),r=o.closest(".js-follow-up"),a=null==r?void 0:r.getAttribute("data-follow-up-id"),l=o.classList.contains("bc-orange-400")?0:2,i=new FormData;i.append("fkey",StackExchange.options.user.fkey),o.classList.add("is-loading");try{const t=await fetch(`${s}/posts/comments/${a}/vote/${l}`,{method:"POST",body:i});if(!t.ok)throw new Error;const e=await t.json();if(!e.Success)throw new Error(e.Message);const o=document.querySelector(`.js-follow-ups-container[data-post-id="${n}"]`);await m(o)}catch(t){o.classList.remove("is-loading");let e=__tr(["An error occurred during voting."], undefined, "en", []);t instanceof Error&&t.message&&(e=t.message),StackExchange.helpers.showToast(e,{type:"danger",useRawHtml:!0})}})(t,e,o)))}))};const y=t=>{t.querySelectorAll("button.js-follow-up-edit, button.js-edit-comment-cancel").forEach((t=>{const e=t.closest(".js-follow-up");e&&t.addEventListener("click",(()=>{t.classList.contains("js-follow-up-edit")&&(p(e,".edit-comment-form .js-comment-text-input",".edit-comment-form .js-char-counter",".js-edit-comment-submit"),async function(t){var e,o;const n=t.querySelector(".edit-comment-form .js-comment-text-input"),r=t.getAttribute("data-follow-up-id"),l=await fetch(`${s}/get-text/follow-ups/${r}`),i=await l.text();if(n){n.value=i,n.dispatchEvent(new Event("input"));const t=null!==(o=null===(e=n.closest(".js-follow-ups-container"))||void 0===e?void 0:e.getAttribute("data-post-id"))&&void 0!==o?o:"0";a.triggerMentionEditEvent(n,parseInt(t),parseInt(null!=r?r:"0"))}}(e)),l(e,[".js-toggle-for-edit",".edit-comment-form"]),e.querySelectorAll(".reply-to-comment-form").forEach((t=>{t.classList.contains("d-none")||t.classList.add("d-none")})),i(e.querySelector(".edit-comment-form"))}))}));t.querySelectorAll("button.js-edit-comment-submit").forEach((e=>{const o=e.closest(".js-follow-up");if(!o)return;const n=o.querySelector(".edit-comment-form .js-comment-text-input"),r=o.getAttribute("data-follow-up-id");e.addEventListener("click",(e=>d(e,t,r,n))),n.addEventListener("keydown",(e=>{"Enter"!==e.key||e.shiftKey||a.isMentionPopupShow()||(e.preventDefault(),d(e,t,r,n))}))}))},g=t=>document.querySelector(`div[data-follow-up-id="${t}"]`),v=(t,e=!1)=>{t.classList.add("comment__highlight","pt6"),e&&t.scrollIntoView({behavior:"smooth",block:"center"})};function b(t,e){if(!e||""===e.trim())return t.value;return`@${function(t){const e=document.createElement("textarea");return e.innerHTML=t,e.value}(e)} `+t.value}const E=e=>{(null!=e?e:document.querySelectorAll(".js-follow-ups-container")).forEach((e=>{const o=e.querySelector(".js-bottom-bar");(e=>{e.querySelectorAll("button.js-reply-bar, button.js-add-comment-cancel").forEach((o=>{o.addEventListener("click",(()=>{var n;if(S()){const t=parseInt(e.getAttribute("data-post-id")||"0");document.dispatchEvent(new CustomEvent("firstTimeCommenting",{detail:{editorPosition:"top",postId:t}}))}else l(e,[".js-reply-bar",".add-comment-form"]),i(e.querySelector(".add-comment-form"));if(o.classList.contains("js-reply-bar")){const o=parseInt((null===(n=document.querySelector(".js-question"))||void 0===n?void 0:n.getAttribute("data-questionid"))||"0"),s=parseInt(e.getAttribute("data-post-id")||"0"),a=[...document.querySelectorAll(".js-follow-ups-container")].indexOf(e),l=parseInt(e.getAttribute("data-total-comment-count")||"0");t("follow_ups_ui_experiment.reply_bar_click",{source:window.location.href,followUpsUIExperimentGroup:r,questionId:o,answerId:s,answerPositionOnPage:a,numberOfPreExistingComments:l})}}))}))})(e),p(e,".js-comment-text-input",".js-char-counter",".js-add-comment-submit"),(t=>{const e=t.querySelector(".js-add-comment-submit"),o=t.querySelector(".js-comment-text-input");e&&o&&(e.addEventListener("click",(n=>{c(n,t,e,o,!0)})),o.addEventListener("keydown",(n=>{"Enter"!==n.key||n.shiftKey||a.isMentionPopupShow()||(n.preventDefault(),c(n,t,e,o,!0))})))})(e),o&&(((t,e)=>{const o=t.querySelector(".js-add-comment-bottom-submit"),n=t.querySelector(".js-comment-text-input");o&&n&&(o.addEventListener("click",(t=>c(t,e,o,n,!1))),n.addEventListener("keydown",(t=>{"Enter"!==t.key||t.shiftKey||a.isMentionPopupShow()||(t.preventDefault(),c(t,e,o,n,!1))})))})(o,e),function(e){const o=e.querySelector("button.js-add-comment-bottom-button"),n=e.querySelector("button.js-add-comment-bottom-cancel"),s=parseInt(e.closest(".js-follow-ups-container").getAttribute("data-post-id")||"0");o&&o.addEventListener("click",(()=>{var o;if(S())document.dispatchEvent(new CustomEvent("firstTimeCommenting",{detail:{editorPosition:"bottom",postId:s}}));else{const t=e.querySelector(".add-comment-bottom-form");(null==t?void 0:t.classList.contains("d-none"))&&(null==t||t.classList.remove("d-none")),i(e.querySelector(".add-comment-bottom-form"))}const n=parseInt((null===(o=document.querySelector(".js-question"))||void 0===o?void 0:o.getAttribute("data-questionid"))||"0"),a=[...document.querySelectorAll(".js-follow-ups-container")].indexOf(e),l=parseInt(e.getAttribute("data-total-comment-count")||"0");t("follow_ups_ui_experiment.add_comment_bottom_link_click",{source:window.location.href,followUpsUIExperimentGroup:r,questionId:n,answerId:s,answerPositionOnPage:a,numberOfPreExistingComments:l})})),n&&n.addEventListener("click",(()=>{const t=e.querySelector(".add-comment-bottom-form");(null==t?void 0:t.classList.contains("d-none"))||null==t||t.classList.add("d-none"),i(e.querySelector(".add-comment-bottom-form"))}))}(o),p(o,".js-comment-text-input",".js-char-counter",".js-add-comment-bottom-submit")),f(e),w(e),h(e),(t=>{const e=t.getAttribute("data-post-id"),o=t.getAttribute("data-comment-flags-remaining-today");t.querySelectorAll(".js-flag-button").forEach((t=>{const n=t.getAttribute("data-follow-up-id");t.addEventListener("click",(()=>{dispatchEvent(new CustomEvent("flagModalOpen",{detail:{postId:e,followUpId:n,commentFlagsRemainingToday:o}}))}))}))})(e),(t=>{const e=t.getAttribute("data-post-id");t.querySelectorAll(".js-flag-retract-button").forEach((t=>{const o=t.getAttribute("data-follow-up-id");t.addEventListener("click",(()=>{dispatchEvent(new CustomEvent("flagModalOpen",{detail:{postId:e,followUpId:o,retracting:!0}}))}))}))})(e),y(e),(t=>{const e=t.querySelectorAll(".js-follow-up-copy-link"),o=t.getAttribute("data-post-id");e.forEach((t=>{t.addEventListener("click",(async e=>{e.preventDefault();const n=t.closest(".js-follow-up"),r=null==n?void 0:n.getAttribute("data-follow-up-id"),s=`${window.location.origin}${window.location.pathname}#comment${r}_${o}`;try{await navigator.clipboard.writeText(s),StackExchange.helpers.showToast(__tr(["Link copied to clipboard!"], undefined, "en", []),{type:"success"})}catch{StackExchange.helpers.showToast(__tr(["Failed to copy link to clipboard."], undefined, "en", []),{type:"danger"})}}))}))})(e),(t=>{const e=t.querySelector(".js-full-collapse");e&&e.addEventListener("click",(()=>{t.querySelectorAll(".js-follow-ups, .js-arrow, .js-bottom-bar").forEach((t=>{t.classList.toggle("d-none")}))}))})(e),(t=>{const e=t.querySelector(".js-show-more-button");e&&e.addEventListener("click",(async()=>{await m(t,{topCommentsOnly:!1})}))})(e),(e=>{const o=e.querySelectorAll("button.js-follow-up-reply-to"),n=e.querySelectorAll("button.js-reply-to-comment-cancel");o.forEach((o=>{const n=o.closest(".js-follow-up");if(!n)return;const s=n.querySelector(".js-comment-text-input"),l=n.getAttribute("data-follow-up-id");o.addEventListener("click",(()=>{var o;if(S()){const t=parseInt(e.getAttribute("data-post-id")||"0");document.dispatchEvent(new CustomEvent("firstTimeCommenting",{detail:{followUpId:l,postId:t}}))}else{p(n,".reply-to-comment-form .js-comment-text-input",".reply-to-comment-form .js-char-counter",".js-reply-to-comment-submit"),n.querySelectorAll(".reply-to-comment-form").forEach((t=>{t.classList.contains("d-none")&&t.classList.remove("d-none")}));const t=n.querySelector(".reply-to-comment-form textarea");t&&t.focus()}const s=parseInt((null===(o=document.querySelector(".js-question"))||void 0===o?void 0:o.getAttribute("data-questionid"))||"0"),a=parseInt(e.getAttribute("data-post-id")||"0"),i=[...document.querySelectorAll(".js-follow-ups-container")].indexOf(e),c=parseInt(e.getAttribute("data-total-comment-count")||"0");t("follow_ups_ui_experiment.reply_button_click",{source:window.location.href,followUpsUIExperimentGroup:r,questionId:s,answerId:a,answerPositionOnPage:i,numberOfPreExistingComments:c})})),s.addEventListener("keydown",(t=>{"Enter"!==t.key||t.shiftKey||a.isMentionPopupShow()||(t.preventDefault(),u(t,e,n,s,l))}))})),n.forEach((t=>{const e=t.closest(".js-follow-up");e&&t.addEventListener("click",(()=>{e.querySelectorAll(".reply-to-comment-form").forEach((t=>{t.classList.contains("d-none")||t.classList.add("d-none")})),i(e.querySelector(".reply-to-comment-form"))}))})),e.querySelectorAll("button.js-reply-to-comment-submit").forEach((t=>{const o=t.closest(".js-follow-up");if(!o)return;const n=o.querySelector(".js-comment-text-input"),r=o.getAttribute("data-follow-up-id");t.addEventListener("click",(t=>u(t,e,o,n,r)))}))})(e),(t=>{const e=t.closest(".js-answer");if(!e)return;const o=e.querySelector(".js-fetch-deleted-follow-ups");if(!o)return;const n=o.cloneNode(!0);o.replaceWith(n),n.addEventListener("click",(async e=>{e.preventDefault(),await m(t,{topCommentsOnly:!1,includeDeleted:!0})}),{once:!0})})(e)}))},S=()=>{var t;return"True"==(null===(t=document.querySelector(".js-follow-ups-container"))||void 0===t?void 0:t.getAttribute("data-show-first-time-commenting"))};E(),window.addEventListener("flagSubmitted",(async t=>{const{postId:e}=t.detail,o=document.querySelector(`.js-follow-ups-container[data-post-id="${e}"]`);await m(o)})),window.addEventListener("flagRetract",(async t=>{const{postId:e}=t.detail,o=document.querySelector(`.js-follow-ups-container[data-post-id="${e}"]`);await m(o)})),StackExchange.ready((()=>{document.querySelectorAll(".js-follow-ups-container").length>0&&(()=>{const t=window.location.hash;if(!t.startsWith("#comment"))return;const[e,o]=t.replace("#comment","").split("_");e&&o&&!isNaN(Number(e))&&!isNaN(Number(o))&&null===document.querySelector(`.js-question[data-questionid="${o}"]`)&&setTimeout((()=>{const t=g(e);if(t)return void v(t);const n=document.querySelector(`.js-follow-ups-container[data-post-id="${o}"]`);n?m(n,{topCommentsOnly:!1,includeDeleted:!0}).then((()=>{const t=g(e);t?v(t,!0):StackExchange.helpers.showToast(__tr(["Comment not found."], undefined, "en", []),{type:"danger"})})):StackExchange.helpers.showToast(__tr(["Comment not found."], undefined, "en", []),{type:"danger"})}),300)})(),S()&&(document.addEventListener("firstTimeCommenterValidationSuccess",(t=>{const e=t,o=document.querySelector(`#follow-ups-container-${e.detail.postId}`);if(o&&"top"===e.detail.editorPosition&&(l(o,[".js-reply-bar",".add-comment-form"]),i(o.querySelector(".add-comment-form"))),o&&"bottom"===e.detail.editorPosition){const t=o.querySelector(".add-comment-bottom-form");(null==t?void 0:t.classList.contains("d-none"))&&(null==t||t.classList.remove("d-none")),i(o.querySelector(".add-comment-bottom-form"))}const n=document.querySelector(`#comment-${e.detail.followUpId}`);if(n){const t=n.querySelector(".reply-to-comment-form");t&&t.classList.contains("d-none")&&t.classList.remove("d-none");const e=n.querySelector(".reply-to-comment-form textarea");e&&e.focus()}document.querySelectorAll(".js-follow-ups-container").forEach((t=>{t.setAttribute("data-show-first-time-commenting","False")}))})),document.addEventListener("firstTimeCommenterValidationFailed",(()=>{document.querySelectorAll(".js-follow-up-reply-to, .js-reply-bar, .js-add-comment-bottom-button").forEach((t=>{t.setAttribute("disabled","true")}))})))}))})()})();