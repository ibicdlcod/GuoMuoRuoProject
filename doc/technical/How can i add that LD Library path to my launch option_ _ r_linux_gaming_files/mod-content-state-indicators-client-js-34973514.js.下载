import"./faceplate-tooltip-f1238739.js";import{i as e,f as t,_ as o,n as s,s as r,dE as n,k as a,x as i,e as l,v as d,g as p,h as c,I as u,aE as m,dF as h,y as f,ae as y,c as S,ab as g,a6 as z,j as v,aA as b}from"./shell-87f4060d.js";import{i as R}from"./icon-notification-off-outline-425756a2.js";import{i as k}from"./icon-overflow-horizontal-outline-2644819f.js";let w=class extends r{constructor(){super(...arguments),this.status=n.Reported}getStyle(){return a({"--list-icon-color":this.status===n.Reported?"var(--shreddit-color-mods-reported-onBackground)":"var(--color-secondary-onBackground)"})}render(){return this.status===n.Reported?i`<div class="bg-mods-reported-background" style="${this.getStyle()}">\n <slot></slot>\n </div>`:i`<details class="max-w-fit bg-secondary-background" style="${this.getStyle()}">\n <summary class="cursor-pointer block list-none"><slot name="${this.status}"></slot></summary>\n <slot></slot>\n </details>`}};w.styles=[e`summary::-webkit-details-marker{display:none}`,t],o([s({type:String})],w.prototype,"status",void 0),w=o([l("reports-summary-wrapper")],w);const x=d(r);let E=class extends x{constructor(){super(...arguments),this.contentId="",this.isSnoozed=!1,this.reportReason=""}renderReportOverflowMenu(){return i`\n <faceplate-dropdown-menu position="bottom-end">\n ${p({appearance:"plain",size:c.ExtraSmall,children:k({size:u.ExtraSmall})})}\n <faceplate-menu slot="menu">\n ${m({label:this.isSnoozed?"Un-snooze reporter":"Snooze reporter",description:this.isSnoozed?"Receive reports from this user again":"Pause reports from this user for 7 days",leadingIcon:R({size:u.Small}),onClick:this.toggleSnooze})}\n </faceplate-menu>\n </faceplate-dropdown-menu>\n `}sendTrackingEvent(e,t,o){const s=o?"snoozereports":"unsnoozereports",r=h(e)?"post":"comment",n=h(e)?e:null,a=h(e)?null:e,i=f({source:"moderator",action:s,noun:r},{...n&&{post:{id:n}},...a&&{comment:{id:a}},...t&&{action_info:{reason:t}}});this.trackEvent(i)}showToast({success:e,isSnoozed:t}){const o=e?t?"Reports from these users will be paused":"Reports from these users will be resumed":"Failed to update reports",s=e?y.info:y.error,r=S("faceplate-alert",{level:s,message:o});this.dispatchEvent(r)}async updateReportState(e){try{const{data:t}=await g({operation:z.UpdateReportState,variables:{input:{itemId:this.contentId,reportText:this.reportReason,isSnoozed:e}}});return t?.updateReport?.ok??!1}catch(e){return!1}}async toggleSnooze(e){const t=!this.isSnoozed;this.sendTrackingEvent(this.contentId,this.reportReason,t);const o=await this.updateReportState(t);o&&(this.isSnoozed=t),this.showToast({success:o,isSnoozed:this.isSnoozed})}render(){const e={"flex items-center m-0 p-0":!0,"bg-secondary-background":this.isSnoozed};return i`<li class="${v(e)}">\n <slot \n name="${b(this.isSnoozed?"snoozed":void 0)}" \n class="flex-auto block" \n></slot>\n ${this.renderReportOverflowMenu()}\n </li> `}};E.styles=[t],o([s({type:String,attribute:"content-id"})],E.prototype,"contentId",void 0),o([s({type:Boolean,attribute:"is-snoozed"})],E.prototype,"isSnoozed",void 0),o([s({type:String,attribute:"report-reason"})],E.prototype,"reportReason",void 0),E=o([l("user-report-summary")],E);
//# sourceMappingURL=mod-content-state-indicators-client-js-34973514.js.map
